function get500Image(t){return userObject.isMobile,t.replace("/100/","/500/")}function getP(t,a){return Math.round(100*t/a)}function getPoints(){_JCROP.whcc={};var t=Math.round((_JCROP.coor.x+_JCROP.coor.x2)/2),a=Math.round((_JCROP.coor.y+_JCROP.coor.y2)/2);_JCROP.whcc.x1=getP(t,_JCROP.img.x),_JCROP.whcc.y1=getP(a,_JCROP.img.y),_JCROP.whcc.x3=getP(_JCROP.coor.w,_JCROP.img.x),_JCROP.whcc.y3=getP(_JCROP.coor.h,_JCROP.img.y),_JCROP.whcc.x2=50,_JCROP.whcc.y2=50}function updateCartCoordinates(){if(!_JCROP.cartid||void 0===_JCROP.cartid)return alert("Item is no longer available in your cart."),!1;var t=_JCROP.cartid,a=$(".js-price-list-body").data("requestslug").split("/");a[3]="update-crop";var i=a.join("/");$.ajax({type:"POST",url:i+"?_token="+$("#csrf_token").val(),data:{cartid:t,data_x:_JCROP.coor.x,data_y:_JCROP.coor.y,data_h:parseInt(_JCROP.coor.y+_JCROP.coor.h),data_w:parseInt(_JCROP.coor.x+_JCROP.coor.w),data_oh:parseInt(_JCROP.coor.h),data_ow:parseInt(_JCROP.coor.w),print_width:parseFloat(_JCROP.asp.x),print_height:parseFloat(_JCROP.asp.y)}}).done(function(t){_JCROP.active.setAttribute("data-x",_JCROP.coor.x),_JCROP.active.setAttribute("data-y",_JCROP.coor.y),_JCROP.active.setAttribute("data-h",parseInt(_JCROP.coor.y+_JCROP.coor.h)),_JCROP.active.setAttribute("data-w",parseInt(_JCROP.coor.x+_JCROP.coor.w)),_JCROP.active.setAttribute("data-oh",parseInt(_JCROP.coor.h)),_JCROP.active.setAttribute("data-ow",parseInt(_JCROP.coor.w)),_JCROP.active.setAttribute("data-aspx",parseFloat(_JCROP.asp.x)),_JCROP.active.setAttribute("data-aspy",parseFloat(_JCROP.asp.y)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-x",_JCROP.coor.x),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-y",_JCROP.coor.y),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-h",parseInt(_JCROP.coor.y+_JCROP.coor.h)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-w",parseInt(_JCROP.coor.x+_JCROP.coor.w)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-oh",parseInt(_JCROP.coor.h)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-ow",parseInt(_JCROP.coor.w)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-aspx",parseFloat(_JCROP.asp.x)),_JCROP.active.parentElement.parentElement.previousElementSibling.setAttribute("data-aspy",parseFloat(_JCROP.asp.y));noty($.extend({text:"undefined"!=window.labels?window.labels.crop_area_has_been_updated:"Crop area has been updated",type:"success",template:'<div class="noty_message"><span class="noty_text"></span><div class="noty_close"></div></div>',timeout:4e3},window.notyDefaults))})}window.Proofing_Store={galleryCart:".js-gal-cart",favGalleryCart:".js-fav-gal-cart",addPhoto:".js-add-photo",floatingCartOverlay:".js-proofing-fc-overlay",floatingCartBlock:".js-proofing-fc-block",floatingCartClose:".js-proofing-fc-close",cartItemRemove:".js-cart-item-remove",floatingCartBtn:".js-floating-pcart",insideCartQuantity:".js-inside-cart-quantity",checkoutForm:".js-pcheckout-form",cropImageBtn:".js-crop-image",cropImageCloseBtn:".js-image-crop-close-btn",cropImage:".js-image-crop-overlay",cropCartUpdate:".js-update-cart-img-coordinates"},Proofing_Store.proofingFullGalleryStoreItemQuantity=function(){$.each($(".js-fullgallery-cartitems"),function(t,a){var i=".js-fullgallery-"+$(a).data("galleryid")+"-"+$(a).data("fullgalleryoptionid");$(i).attr("data-quantity",$(a).data("quantity")),$(i).attr("data-fullgalleryoptionid",$(a).data("fullgalleryoptionid")),$(i).attr("data-fullgalleryimageid",$(a).data("imageid"))})},Proofing_Store.proofingStoreItemQuantity=function(){$.each($(".js-gal-cart-ref"),function(t,a){var i=".js-"+$(a).data("imageid")+"-"+$(a).data("optionid");$(i).attr("data-quantity",$(a).data("quantity"))})},Proofing_Store.Init=function(){var t,a,i,e,o,r,n,s,d,l,c,p,g,h,m,u,f,w,y,_,j;function v(t,a,i,e){return 300*i<=a&&300*e<=t}function C(t,a,i,e,o){var r,n,s,d=o.toLowerCase().split("x");d[0]=parseInt(d[0]),d[1]=parseInt(d[1]),parseInt(t)>=parseInt(a)?(n=d[0]>d[1]?d[0]:d[1],r=d[0]<d[1]?d[0]:d[1],s="fullheight"):(r=d[0]>d[1]?d[0]:d[1],n=d[0]<d[1]?d[0]:d[1],s="fullwidth"),window.CurrentImage={large_height:t,large_width:a,height:e,width:i},i=parseInt(i),e=parseInt(e);var l={priority:s,aspx:r,aspy:n,status:!1};if(1==$(".js-printable-check-val").attr("data-photocheck")&&!v(t,a,r,n))return l.status=!1,l.x=-1,l.y=-1,l.h=-1,l.w=-1,l.ow=-1,l.oh=-1,l;if("fullheight"==s){if(l.h=e,l.w=Math.round(e*r/n),l.w<=i)return l.type="height 100%",l.x=Math.round((i-l.w)/2),l.y=0,l.ow=l.w,l.oh=l.h,l.w+=l.x,l.status=!0,l;if(l.w=i,l.h=Math.round(i*n/r),l.h<=e)return l.type="width 100%",l.x=0,l.y=Math.round((e-l.h)/2),l.oh=l.h,l.ow=l.w,l.h+=l.y,l.status=!0,l}else{if(l.w=i,l.h=Math.round(i*n/r),l.h<=e)return l.type="width 100%",l.x=0,l.y=Math.round((e-l.h)/2),l.oh=l.h,l.ow=l.w,l.h+=l.y,l.status=!0,l;if(l.h=e,l.w=Math.round(e*r/n),l.w<=i)return l.type="height 100%",l.x=Math.round((i-l.w)/2),l.y=0,l.ow=l.w,l.oh=l.h,l.w+=l.x,l.status=!0,l}return 0!=$(".js-printable-check-val").attr("data-photocheck")||v(t,a,r,n)?l:(l.status=!1,l.x=r,l.y=n,l.h=e,l.w=i,l.ow=a,l.oh=t,l)}Proofing_Store.cropModalInit(),$(function(){Proofing_Store.jCropint(this)}),Proofing_Store.proofingStoreItemQuantity(),Proofing_Store.proofingFullGalleryStoreItemQuantity(),t=$("#csrf_token").val(),$("body").on("click",Proofing_Store.addPhoto,function(c){var v;if($(".js-proofing-fc-loading").show(),p="fav-page"==$(this).data("pagetype")?$(this).data("linkslug"):$(".js-price-list-body").attr("data-linkslug"),j=$(".js-price-list-img").attr("data-galleryid"),o=$(".js-price-list-img img").attr("src"),l=$(".js-global-currency").val(),m=$(".js-price-list-body").data("itemadded"),u=$(".js-price-list-body").data("itemremove"),$(this).parent().find("span"),label_id=$(this).data("labelid"),downloadtype=$(this).data("downloadtype"),temp2=".js-add-fullgallery-"+j+"-"+label_id,'<div class="js-favimg-noty favimg-noty"><img src="'+o+'"></div>',spanCount=parseInt($(this).siblings("span").text()),s=$(this).data("price"),r=$(this).data("title"),f=$(this).data("labcatalogid"),w=$(this).attr("data-printable"),h=$(this).data("type"),2==downloadtype&&""!=$(temp2).attr("data-fullgalleryoptionid")&&0!=$(temp2).attr("data-fullgalleryoptionid")?(labelid=$(temp2).attr("data-fullgalleryoptionid"),a=$(temp2).attr("data-fullgalleryimageid")):(labelid=$(this).data("labelid"),a=$(".js-price-list-img").attr("data-imageid")),y='<div class="js-favimg-noty favimg-noty left"><img src="'+o+'"></div>',_='<div class="js-favimg-title noty-favimg-title">'+r+"</div>",2==h)if($(this).hasClass("plus-icon")){if(spanCount+1>=2)return $(".js-proofing-fc-loading").hide(),sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_digital_warning:"This digital item is already in your cart!","error"),!1;n=1,g=m,$(this).siblings("span").text(1),$(this).siblings(".js-minus-digital-photo").show(),$(this).hide()}else{if(spanCount-1<0)return $(".js-proofing-fc-loading").hide(),sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),!1;n=0,g=u,$(this).siblings("span").text(0),$(this).siblings(".js-add-digital-photo").show(),$(this).hide()}else if($(this).hasClass("plus-icon"))$(this).siblings("span").text(spanCount+1),n=spanCount+1,g=m;else{if(spanCount-1<0)return $(".js-proofing-fc-loading").hide(),sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),!1;$(this).siblings("span").text(spanCount-1),n=spanCount-1,g=u}e=".js-"+$(".js-price-list-img").attr("data-imageid")+"-"+labelid,$(e).attr("data-quantity",n),$(temp2).attr("data-quantity",n),2==downloadtype&&(1==n?($(temp2).attr("data-fullgalleryoptionid",labelid),$(temp2).attr("data-fullgalleryimageid",a)):($(temp2).attr("data-fullgalleryoptionid","0"),$(temp2).attr("data-fullgalleryimageid","0"))),i=$("#cart-item-template").html(),i=$(i)[0],$(i).attr("data-optionlabel",labelid),$(i).attr("data-productid",a),$(i).find(".cart-item-image").attr("src",o),$(i).find(".cart-item-title").html(r),$(i).find(".cart-item-label").hide(),$(i).find(".cart-item-unitprice").html(l+s),$(i).find(".cart-item-quantity").val(n),$(i).find(".cart-item-quantity").attr("data-prevvalue",n),$(i).find(".cart-item-quantity").attr("data-title",r),$(i).find(".cart-item-quantity").attr("data-maxlimit",$(".js-quantity").attr("max")),$(i).find(".cart-item-quantity").attr("data-type",h),$(i).find(".cart-item-price").html(l+""+s*n),0==w&&($(i).find(Proofing_Store.cropImageBtn).remove(),$(i).find(".crop-image-view").removeClass("jcrop-img-view")),v=i,$.ajax({type:"POST",url:$(".js-price-list-body").data("requestslug")+"?_token="+t,data:{id:a,option:labelid,quantity:n,"gallery-slug":p,lab_catalog_id:f}}).done(function(t){$(i).find(Proofing_Store.cropImageBtn).attr("data-x",t.x),$(i).find(Proofing_Store.cropImageBtn).attr("data-y",t.y),$(i).find(Proofing_Store.cropImageBtn).attr("data-h",t.h),$(i).find(Proofing_Store.cropImageBtn).attr("data-w",t.w),$(i).find(Proofing_Store.cropImageBtn).attr("data-oh",t.oh),$(i).find(Proofing_Store.cropImageBtn).attr("data-ow",t.ow),$(i).find(Proofing_Store.cropImageBtn).attr("data-aspx",t.aspx),$(i).find(Proofing_Store.cropImageBtn).attr("data-aspy",t.aspy),0!=w&&($(i).find(".jcrop-img-view").attr("data-x",t.x),$(i).find(".jcrop-img-view").attr("data-y",t.y),$(i).find(".jcrop-img-view").attr("data-h",t.h),$(i).find(".jcrop-img-view").attr("data-w",t.w),$(i).find(".jcrop-img-view").attr("data-oh",t.oh),$(i).find(".jcrop-img-view").attr("data-ow",t.ow),$(i).find(".jcrop-img-view").attr("data-aspx",t.aspx),$(i).find(".jcrop-img-view").attr("data-aspy",t.aspy),$(function(){$(i).find(".jcrop-img-view img").Jcrop({bgColor:"black",bgOpacity:.4,setSelect:[t.x,t.y,t.h,t.w],aspectRatio:t.aspx/t.aspy,allowResize:!1,allowSelect:!1,boxWidth:70,boxHeight:105,trueSize:[t.w,t.h]})})),$(".js-proofing-fc-loading").hide(),a==t.productId&&Proofing_Store.AddNewItem(v),$(".js-ptotal-amount").html(t.totalPrice),0!==$(".js-pcart-quantity").parent().find(".cart-label").length?$(".js-pcart-quantity").text("("+t.quantity+")"):$(".js-pcart-quantity").text(t.quantity),0==t.quantity?($(".js-floating-pcart-empty").show(),$(Proofing_Store.floatingCartBtn).addClass("cart-not-active"),$(".js-pcheckout-container").hide()):($(".js-floating-pcart-empty").hide(),$(".js-pcheckout-container").show(),$(Proofing_Store.floatingCartBtn).removeClass("cart-not-active"),$(".js-proofing-header-cart").addClass("favourite-count-active")),0==t.quantity&&($(".js-floating-cart-empty").show(),$(".js-checkout-container").hide(),$(".js-floating-cart").addClass("cart-not-active")),null!=t.cartImages[a]?($($(".js-slideshowgal-cart")[window.slideIndex]).addClass("favourite-info-active"),$(".shopping-cart-show[data-imageid='"+a+"']").css("opacity","1"),$(".shopping-cart-show[data-imageid='"+a+"']").addClass("shopping-cart-active")):($(".shopping-cart-show[data-imageid='"+a+"']").css("opacity","0"),$(".shopping-cart-show[data-imageid='"+a+"']").removeClass("shopping-cart-active"),$($(".js-slideshowgal-cart")[window.slideIndex]).removeClass("favourite-info-active")),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Proofing_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Proofing_Store.checkoutForm).hide().addClass("hide-all")),$.each($(".js-cart-item-list"),function(a,i){t.productId==$(i).attr("data-productid")&&t.optionId==$(i).attr("data-optionlabel")&&($(i).find(Proofing_Store.cartItemRemove).attr("data-itemid",t.itemId),$(i).find(Proofing_Store.insideCartQuantity).attr("data-itemid",t.itemId))})}),Proofing_Store.AddNewItem=function(t){0!=$(".js-cart-item-list").length?$.each($(".js-cart-item-list"),function(t,i){$(i).attr("data-productid")==a&&$(i).attr("data-optionlabel")==labelid?($(i).remove(),d=1):d=1}):$(".js-pcart-item-container").append(t),1==d&&$(".js-pcart-item-container").append(t),$.each($(".js-cart-item-list"),function(t,a){0!=$(a).find(Proofing_Store.insideCartQuantity).val()&&""!=$(a).find(Proofing_Store.insideCartQuantity).val()||$(a).remove()});noty($.extend({text:g,type:"success",template:'<div class="noty_message text-left left">'+y+_+'<span class="noty_text before-none"></span><div class="noty_close"></div></div>',timeout:4e3},window.notyDefaults));Proofing_Store.cropModalInit()}}),$("body").on("change",Proofing_Store.insideCartQuantity,function(a){var i=$(this).val();i<=0?(sweetAlert(void 0!==window.labels?window.labels.store_cart_item_quantity_zero:"Oops...",void 0!==window.labels?window.labels.store_cart_item_quantity_cannot_zero:"Quantity cannot be zero!","error"),$(this).val($(this).attr("data-prevvalue")),i=$(this).attr("data-prevvalue")):Number.isInteger(parseFloat(i))&&2!=$(this).attr("data-type")||(i=1,$(this).val(1)),c=$(this).data("itemid");var o=$(this);e=".js-"+o.parents(".js-cart-item-list").attr("data-productid")+"-"+o.parents(".js-cart-item-list").attr("data-optionlabel"),$(e).attr("data-quantity",i),$.ajax({type:"POST",url:"/site/floating-quantity/"+c+"?_token="+t,data:{quantity:i,"client-slug":$(".js-price-list-body").attr("data-clientslug")}}).done(function(t){o.siblings(".js-cart-item-price").html($(".js-global-currency").val()+t.product_total),$(".js-ptotal-amount").html(t.totalPrice),0!==$(".js-pcart-quantity").parent().find(".cart-label").length?$(".js-pcart-quantity").text("("+t.quantity+")"):$(".js-pcart-quantity").text(t.quantity),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Proofing_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Proofing_Store.checkoutForm).hide().addClass("hide-all"))})}),$("body").on("click",Proofing_Store.cartItemRemove,function(a){c=$(this).data("itemid");var i=$(this);swal({title:$(".js-price-list-body").data("willremoved"),text:"",type:"warning",showCancelButton:!0,confirmButtonColor:"#DD6B55",confirmButtonText:void 0!==window.labels?window.labels.store_cart_confirm_remove:"Yes, remove it",cancelButtonText:void 0!==window.labels?window.labels.store_cart_cancel_button:"Cancel",closeOnConfirm:!0,closeOnCancel:!1,allowOutsideClick:!0,showLoaderOnConfirm:!0},function(a){a?($("button.confirm").attr("disabled",!0),$.ajax({type:"POST",url:"/site/floating-remove-item/"+c+"?_token="+t}).done(function(t){$("button.confirm").attr("disabled",!1),i.parents(".js-cart-item-list").remove(),$(".js-ptotal-amount").html(t.totalPrice),0!==$(".js-pcart-quantity").parent().find(".cart-label").length?$(".js-pcart-quantity").text("("+t.quantity+")"):$(".js-pcart-quantity").text(t.quantity);var a=i.parents(".js-cart-item-list").attr("data-productid");null!=t.cartImages[i.parents(".js-cart-item-list").attr("data-productid")]?$($(".js-slideshowgal-cart")[window.slideIndex]).addClass("favourite-info-active"):$($(".js-slideshowgal-cart")[window.slideIndex]).removeClass("favourite-info-active"),parseInt(t.totalPrice)>=parseInt($(".js-price-list-body").attr("data-mincartprice"))?($(Proofing_Store.checkoutForm).show().removeClass("hide-all"),$(".js-mincart-error").hide().addClass("hide-all")):($(".js-mincart-error").show().removeClass("hide-all"),$(Proofing_Store.checkoutForm).hide().addClass("hide-all")),e=".js-"+i.parents(".js-cart-item-list").attr("data-productid")+"-"+i.parents(".js-cart-item-list").attr("data-optionlabel"),$(e).attr("data-quantity",0),0==t.quantity&&($(".js-floating-pcart-empty").show(),$(".js-pcheckout-container").hide(),$(".shopping-cart-show[data-imageid='"+a+"']").css("opacity","0"),$(Proofing_Store.floatingCartBtn).addClass("cart-not-active"))})):(swal(void 0!==window.labels?window.labels.store_cart_cancelled:"Cancelled",void 0!==window.labels?window.labels.store_cart_still_in_cart:"Item is still in cart :)","error"),$("button.confirm").attr("disabled",!1))})}),$("body").on("click",Proofing_Store.galleryCart,function(t){t.stopPropagation(),$("body").addClass("no-scroll"),$(".js-plt").hide(),$(".js-plt_"+$(this).attr("data-galleryid")).show(),$(".js-price-list-body").show(),$(".js-pcart-item-wrapper").hide(),$(".js-price-list-img").attr("data-imageid",$(this).attr("data-imageid")),$(".js-price-list-img").attr("data-galleryid",$(this).attr("data-galleryid")),$(".js-price-list-img img").attr("src",$(this).attr("data-smallscreen"));var a,i=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-height"),e=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-width"),o=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-height500"),r=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-width500"),n=o,s=r;void 0!==n&&void 0!==s&&""!=typeof n&&""!=typeof s||void 0!==i&&void 0!==e&&(s=e,n=i,newUnit=500,"1"==$(this).attr("data-jcropnewimg")?newUnit=500:newUnit=400,s<=newUnit&&n<=newUnit||(newUnit,s>newUnit&&(s=newUnit,n=Math.round(newUnit*i/e)))),$.each($(".js-photono-"+$(this).attr("data-imageid")),function(t,o){$that=$(o),$.each($(".js-table-tr"),function(t,o){if($that.attr("data-optionid")==$(o).attr("data-labelid")&&($(o).find("span").text($that.attr("data-quantity")),1==$that.attr("data-quantity")?($(o).find(".js-minus-digital-photo").show(),$(o).find(".js-add-digital-photo").hide()):($(o).find(".js-minus-digital-photo").hide(),$(o).find(".js-add-digital-photo").show()),$(this).attr("data-labcatlogid")>=0&&0==$(o).attr("data-download"))){var r=$(o).find(".label-v");a="",parseFloat($(r).attr("data-height"))>0&&parseFloat($(r).attr("data-width"))>0?a=$(r).attr("data-width")+" x "+$(r).attr("data-height"):-1!==(a=$(o).find(".label-v").text()).indexOf("8 Up Wallet")&&(a="2.5 x 3.5"),C(i,e,s,n,a).status?$(o).show():"js-check-printable-size"==$that.attr("data-photocheck")&&$(o).hide()}}),$(".js-table-container").each(function(t,a){if($(a).find(".js-table-tr").is(":visible")){$(a).find(".tr-heading").show();var i=$(a).find(".tr-heading").find(".label-v").attr("id");$(".proofing-category").find(".data-target").each(function(){$(this).attr("data-id")==i&&$(this).show()})}else{$(a).find(".tr-heading").hide();i=$(a).find(".tr-heading").find(".label-v").attr("id");$(".proofing-category").find(".data-target").each(function(){$(this).attr("data-id")==i&&$(this).hide()})}}),$(".js-table-tr").is(":visible")?$(".js-options-not-found").hide():$(".js-options-not-found").show()}),$(".js-price-list-img img").unbind("load"),$(".js-price-list-img img").on("load",function(){$(Proofing_Store.floatingCartOverlay+" ,"+Proofing_Store.floatingCartBlock).addClass("active")})}),Proofing_Store.rotateCrop=function(){var t,a,i,e,o=_JCROP.active,r={};t=parseInt($(o).attr("data-aspy")),a=parseInt($(o).attr("data-aspx")),"fullheight"==((i=_JCROP.img.x)>(e=_JCROP.img.y)?"fullwidth":"fullheight")?(r.h=e,r.w=Math.round(e*t/a),r.w<=i&&(r.type="height 100%",r.x=Math.round((i-r.w)/2),r.y=0,r.ow=r.w,r.oh=r.h,r.w+=r.x,r.status=!0),r.w=i,r.h=Math.round(i*a/t),r.h<=e&&(r.type="width 100%",r.x=0,r.y=Math.round((e-r.h)/2),r.oh=r.h,r.ow=r.w,r.h+=r.y,r.status=!0)):(r.w=i,r.h=Math.round(i*a/t),r.h<=e&&(r.type="width 100%",r.x=0,r.y=Math.round((e-r.h)/2),r.oh=r.h,r.ow=r.w,r.h+=r.y,r.status=!0),r.h=e,r.w=Math.round(e*t/a),r.w<=i&&(r.type="height 100%",r.x=Math.round((i-r.w)/2),r.y=0,r.ow=r.w,r.oh=r.h,r.w+=r.x,r.status=!0)),$(o).attr("data-x",r.x),$(o).attr("data-y",r.y),$(o).attr("data-h",r.h),$(o).attr("data-w",r.w),$(o).attr("data-oh",r.oh),$(o).attr("data-ow",r.ow),$(o).attr("data-aspx",t),$(o).attr("data-aspy",a),_JCROP.asp={x:parseFloat($(o).attr("data-aspx")),y:parseFloat($(o).attr("data-aspy"))},_JCROP.jcrop.release(),_JCROP.jcrop.setSelect([r.x,r.y,r.w,r.h])},$("body").on("click",Proofing_Store.favGalleryCart,function(t){t.stopPropagation(),$("body").addClass("no-scroll"),$(".js-plt").hide(),$(".js-plt_"+$(this).attr("data-galleryid")).show(),$(".js-price-list-body").show(),$(".js-pcart-item-wrapper").hide(),$(".js-price-list-img").attr("data-imageid",$(this).attr("data-imageid")),$(".js-price-list-img").attr("data-galleryid",$(this).attr("data-galleryid")),$(".js-price-list-img img").attr("src",$(this).attr("data-smallscreen"));$(this).data("imageid");var a,i=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-height"),e=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-width"),o=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-height500"),r=$("[data-gridimageid='"+$(this).data("imageid")+"']").attr("data-width500"),n=o,s=r;void 0!==n&&void 0!==s&&""!=typeof n&&""!=typeof s||void 0!==i&&void 0!==e&&(s=e,n=i,newUnit=500,"1"==$(this).attr("data-jcropnewimg")?newUnit=500:newUnit=400,s<=newUnit&&n<=newUnit||(newUnit,s>newUnit&&(s=newUnit,n=Math.round(newUnit*i/e))));var d=$(".price-list-table:visible").attr("data-galleryid"),l=$(".js-photono-"+$(this).attr("data-imageid"));void 0!==d&&""!=d&&$(".js-photono-"+$(this).attr("data-imageid")+"[data-galleryid="+d+"]").length>0&&(l=$(".js-photono-"+$(this).attr("data-imageid")+"[data-galleryid="+d+"]")),$.each(l,function(t,o){$that=$(o),$.each($(".js-table-tr"),function(t,o){if($that.attr("data-optionid")==$(o).attr("data-labelid")&&($(o).find("span").text($that.attr("data-quantity")),1==$that.attr("data-quantity")?($(o).find(".js-minus-digital-photo").show(),$(o).find(".js-add-digital-photo").hide()):($(o).find(".js-minus-digital-photo").hide(),$(o).find(".js-add-digital-photo").show()),$(this).attr("data-labcatlogid")>=0&&0==$(o).attr("data-download"))){var r=$(o).find(".label-v");a="",parseFloat($(r).attr("data-height"))>0&&parseFloat($(r).attr("data-width"))>0?a=$(r).attr("data-width")+" x "+$(r).attr("data-height"):-1!==(a=$(o).find(".label-v").text()).indexOf("8 Up Wallet")&&(a="2.5 x 3.5"),C(i,e,s,n,a).status?$(o).show():"js-check-printable-size"==$that.attr("data-photocheck")&&$(o).hide()}})}),$(".js-table-container").each(function(t,a){$(a).find(".js-table-tr").is(":visible")?$(a).find(".tr-heading").show():$(a).find(".tr-heading").hide()}),$(".js-table-tr").is(":visible")?$(".js-options-not-found").hide():$(".js-options-not-found").show(),$(".js-price-list-img img").unbind("load"),$(".js-price-list-img img").on("load",function(){$(Proofing_Store.floatingCartOverlay+" ,"+Proofing_Store.floatingCartBlock).addClass("active")})}),$(Proofing_Store.floatingCartClose+" ,"+Proofing_Store.floatingCartOverlay).on("click",function(t){$(Proofing_Store.floatingCartOverlay+" ,"+Proofing_Store.floatingCartBlock).removeClass("active"),$("body").removeClass("no-scroll"),$(".js-prod-desc-single-modal, .js-prod-info").removeClass("active"),$(".js-prod-info").parent().parent(".js-table-tr").removeClass("active"),$(".js-image-crop-close-btn").click()}),$(Proofing_Store.floatingCartBtn+", .js-pcart-nextstep").unbind("click"),$("body").on("click",Proofing_Store.floatingCartBtn+", .js-pcart-nextstep",function(t){$(Proofing_Store.floatingCartOverlay+" ,"+Proofing_Store.floatingCartBlock).addClass("active"),$(".js-price-list-body").hide(),$(".js-pcart-item-wrapper").show(),$("body").addClass("no-scroll")})},_JCROP={},_JCROP.init=function(){function t(t){_JCROP.coor=t,getPoints()}jQuery(function(a){a(".magic").Jcrop({onSelect:t,onChange:t,setSelect:[_JCROP.boxData.x,_JCROP.boxData.y,_JCROP.boxData.w,_JCROP.boxData.h],allowResize:!1,allowSelect:!1,boxWidth:500,boxHeight:550},function(){_JCROP.jcrop=this})})},Proofing_Store.crop_init=function(t){_JCROP.boxData={},_JCROP.active=t,_JCROP.boxData.x=$(t).attr("data-x"),_JCROP.boxData.y=$(t).attr("data-y"),_JCROP.boxData.h=$(t).attr("data-h"),_JCROP.boxData.w=$(t).attr("data-w"),_JCROP.asp={x:parseFloat($(t).attr("data-aspx")),y:parseFloat($(t).attr("data-aspy"))},_JCROP.cartid=$(t).parent().parent().find(Proofing_Store.insideCartQuantity).attr("data-itemid");var a=new Image;if(a.className="magic",$(".crop-image-wrapper").html(a),"1"==userObject.isMobile)var i=get500Image($(t).parent().parent().find("img").attr("src"));else i=get500Image($(t).parent().parent().parent().find("img").attr("src"));a.onload=function(){_JCROP.img={},_JCROP.img.el=a,_JCROP.img.x=a.width,_JCROP.img.y=a.height,_JCROP.init()},a.src=i},Proofing_Store.cropModalInit=function(){$(Proofing_Store.cropImageBtn).unbind("click"),$(Proofing_Store.cropImageBtn).on("click",function(t){$(Proofing_Store.cropImage).addClass("image-crop-modal-active bg-white js-crop-modal-bg"),$(".js-image-crop-body-overlay, .js-image-crop-body").addClass("image-crop-modal-active js-crop-modal-body"),Proofing_Store.crop_init(this),$("body").find(".jcrop-img-view").removeClass("js-update_jcrop"),$("body").find(".js-cart-item-list").removeClass("js-update_jcrop_bg"),$(this).parent().parent().siblings(".jcrop-img-view").addClass("js-update_jcrop"),$(this).parent().parent().parent(".js-cart-item-list").addClass("js-update_jcrop_bg")}),$(Proofing_Store.cropImageCloseBtn).unbind("click"),$(Proofing_Store.cropImageCloseBtn).on("click",function(){$(Proofing_Store.cropImage).removeClass("image-crop-modal-active bg-white js-crop-modal-bg"),$(".js-image-crop-body-overlay, .js-image-crop-body").removeClass("image-crop-modal-active"),$(".magic").length>0&&$(".magic").remove(),void 0!==_JCROP.jcrop&&_JCROP.jcrop.destroy(),$("body").find(".jcrop-img-view").removeClass("js-update_jcrop"),$("body").find(".js-cart-item-list").removeClass("js-update_jcrop_bg")}),$(Proofing_Store.cropCartUpdate).unbind("click"),$(Proofing_Store.cropCartUpdate).on("click",function(){updateCartCoordinates(),$(function(){Proofing_Store.jCropintUpdate()})}),$(".js-rotate-crop").unbind("click"),$(".js-rotate-crop").on("click",function(){Proofing_Store.rotateCrop()})},Proofing_Store.jCropint=function(){$(".jcrop-img-view img").each(function(){var t=$(this).parents(".jcrop-img-view").attr("data-x"),a=$(this).parents(".jcrop-img-view").attr("data-y"),i=$(this).parents(".jcrop-img-view").attr("data-h"),e=$(this).parents(".jcrop-img-view").attr("data-w"),o=parseFloat($(this).parents(".jcrop-img-view").attr("data-aspx")),r=parseFloat($(this).parents(".jcrop-img-view").attr("data-aspy"));$(this).Jcrop({bgColor:"black",bgOpacity:.4,setSelect:[t,a,i,e],aspectRatio:o/r,allowResize:!1,allowSelect:!1,boxWidth:70,boxHeight:105,trueSize:[e,i]})})},Proofing_Store.jCropintUpdate=function(){setTimeout(function(){var t=$(".js-update_jcrop").attr("data-x"),a=$(".js-update_jcrop").attr("data-y"),i=$(".js-update_jcrop").attr("data-h"),e=$(".js-update_jcrop").attr("data-w"),o=parseFloat($(".js-update_jcrop").attr("data-aspx")),r=parseFloat($(".js-update_jcrop").attr("data-aspy"));$(".js-update_jcrop img").Jcrop({bgColor:"black",bgOpacity:.4,setSelect:[t,a,i,e],aspectRatio:o/r,allowResize:!1,allowSelect:!1,boxWidth:70,boxHeight:105,trueSize:[e,i]})},1e3)};
